<head>
  <title>secondscreen</title>
</head>

<template name="layout">
  <div class="container">
    <div class="auth">
      {{loginButtons}}
    </div>
    {{yield}}
    {{> tweet_sidebar }}
  </div>
</template>

<template name="scrape">
  Status so far: <br />{{result}}
</template>

<template name="hackathon">
  <div class="header">
    <h4>{{name}} Demos</h4>
    {{> enter_team }}
  </div>
    <div class="content">
  {{#if hackathon }}
    {{#if demoing_now }}
      <h1>{{demoing_now.hackerleague.name}}</h1>
      <div class="links">
        <a target="_blank" href="{{demoing_now.hackerleague.urls.self}}">View Team</a> &middot;
        <a target="_blank" href="{{demoing_now.hackerleague.urls.external}}">Go to Website</a> &middot;
        <span class="like-info">{{count "liked_by"}} likes</span>
      </div>
      <h4>{{demoing_now.hackerleague.description}}</h4>
      {{> hack_actions }}
      {{#if demoing_now.hackerleague.urls.screenshot }}
        <img src="{{demoing_now.hackerleague.urls.screenshot}}" />
      {{/if}}
    {{/if}}
  {{else}}
    TODO: code to import more hackathons
  {{/if}}
    </div>
</template>

<template name="hack_actions">
  <div class="actions">
    {{#if currentUser }}
      {{#if user_did_action "liked_by" }}
        <button id="like" class="like btn btn-success">Unlike</button>
      {{else}}
        <button id="like" class="like btn btn-primary">Like</button>
      {{/if}}
      {{#if user_did_action "voted_by"}}
        <button id="vote" class="btn btn-success">Unvote</button>
      {{else}}
        <button id="vote" class="btn btn-primary">Vote for Audience Choice (limit 1)</button>
      {{/if}}
      {{#if user_did_action "would_be_used_by"}}
        <button id="woulduse" class="btn btn-success">On second thought...</button>
      {{else}}
        <button id="woulduse" class="btn btn-primary">If you finish this, I would use it.</button>
      {{/if}}
    {{else}}
      <h1>Log in above to participate</h1>
    {{/if}}

  </div>
</template>

<template name="enter_team">
  <div class="chooser">
  Who is demoing right now?
  {{inputAutocomplete settings id="team" class="input-xlarge" placeholder="Current Team"}}
  </div>
</template>

<template name="home">
  Follow hackathon demos as they happen.
</template>

<template name="hack_autocomplete">
  <span>{{hackerleague.name}}</span>
</template>

<template name="tweet_sidebar">
  <div class="tweet-sidebar">
    <!-- placeholder -->
    <a class="twitter-timeline" data-dnt="true" height="500" href="https://twitter.com/search?q=hackprinceton" data-widget-id="399315035559694337">Tweets about "hackprinceton"</a>
  </div>
</template>

