<head>
  <title>secondscreen</title>
</head>

<template name="layout">
  {{loginButtons}}
  {{> tweet_sidebar }}
  {{yield}}
</template>

<template name="scrape">
  Status so far: <br />{{result}}
</template>

<template name="hackathon">
  <h4>{{name}} Demos</h4>
  {{#if hackathon }}
    {{#if demoing_now }}
      <h1>{{demoing_now.hackerleague.name}}</h1>
      <h4>{{demoing_now.hackerleague.description}}</h4>
      {{#if demoing_now.hackerleague.urls.screenshot }}
        <img src="{{demoing_now.hackerleague.urls.screenshot}}" />
      {{/if}}
      {{> hack_actions }}
    {{/if}}
    <h4>They're done, next team:</h4>
    {{> enter_team }}
  {{else}}
    TODO: code to import more hackathons
  {{/if}}
</template>

<template name="hack_actions">
  <div class="actions">
    <a href="{{demoing_now.hackerleague.urls.self}}">View Team</a> |
    <a href="{{demoing_now.hackerleague.urls.external}}">Go to Website</a>
    {{#if currentUser }}
      <span class="like-info">{{count "liked_by"}} likes</span>
      <span class="would-use-info">{{count "would_be_used_by"}} users</span>
      <br />
      {{#if user_did_action "liked_by" }}
        <button id="like" class="like btn btn-success">No longer like</button>
      {{else}}
        <button id="like" class="like btn btn-primary">Like</button>
      {{/if}}
      {{#if user_did_action "voted_by"}}
        <button id="vote" class="btn btn-success">Unvote</button>
      {{else}}
        <button id="vote" class="btn btn-primary">Vote for Audience Choice (limit 1)</button>
      {{/if}}
      {{#if user_did_action "would_be_used_by"}}
        <button id="woulduse" class="btn btn-success">On second thought...</button>
      {{else}}
        <button id="woulduse" class="btn btn-primary">If you finish this, I would use it.</button>
      {{/if}}
    {{else}}
      Log in to participate
    {{/if}}

  </div>
</template>

<template name="enter_team">
  Who is demoing right now?
  {{inputAutocomplete settings id="team" class="input-xlarge" placeholder="Current Team"}}
</template>

<template name="home">
  Follow hackathon demos as they happen.
</template>

<template name="hack_autocomplete">
  <span>{{hackerleague.name}}</span>
</template>

<template name="tweet_sidebar">
  <div class="tweet-sidebar">
    <!-- placeholder -->
    <a class="twitter-timeline" data-dnt="true" height="660" href="https://twitter.com/search?q=hackprinceton" data-widget-id="399315035559694337">Tweets about "hackprinceton"</a>
  </div>
</template>

